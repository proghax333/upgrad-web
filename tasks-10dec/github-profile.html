<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Profile Viewer</title>

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen">
  <main>
    <div class="max-w-lg mx-auto mt-10">
      <form class="flex gap-2 p-2 items-center" id="profileForm">
        <input type="text" name="username" class="flex-1 p-2 px-4 rounded-md border"
          placeholder="Enter GitHub username (ex. proghax333)" />

        <button class="p-2 px-4 bg-blue-800 text-white rounded-md">
          Get Data
        </button>
      </form>

      <!-- Profile UI -->
      <div id="profileCard" class="hidden mt-6 bg-white p-6 rounded-xl shadow-lg"></div>
    </div>
  </main>

  <script>
    const API_URL = "https://api.github.com";
    const select = q => document.querySelector(q);

    const profileFormElement = select("#profileForm");
    const profileCard = select("#profileCard");

    profileFormElement.addEventListener("submit", handleSubmit);

    function getUserByUsername(username) {
      return fetch(`${API_URL}/users/${username}`);
    }

    async function handleSubmit(e) {
      e.preventDefault();

      const formData = new FormData(profileFormElement);
      const { username } = Object.fromEntries(formData.entries());

      try {
        const res = await getUserByUsername(username);
        const data = await res.json();

        if (data.message === "Not Found") {
          profileCard.innerHTML = `
            <p class="text-red-600 text-center font-medium">User not found</p>
          `;
          profileCard.classList.remove("hidden");
          return;
        }

        renderProfile(data);
      } catch (err) {
        console.error(err);
      }
    }

    function renderProfile(u) {
      profileCard.innerHTML = `
        <div class="flex flex-col items-center text-center">
          <img src="${u.avatar_url}" class="w-32 h-32 rounded-full shadow-md" />
          <h2 class="text-2xl font-bold mt-4">${u.name ?? "No Name"}</h2>
          <p class="text-gray-600">@${u.login}</p>
          <p class="mt-3 text-gray-700">${u.bio ?? ""}</p>

          <div class="flex gap-6 mt-4 text-sm">
            <div>
              <p class="font-semibold">${u.followers}</p>
              <p class="text-gray-500">Followers</p>
            </div>
            <div>
              <p class="font-semibold">${u.following}</p>
              <p class="text-gray-500">Following</p>
            </div>
            <div>
              <p class="font-semibold">${u.public_repos}</p>
              <p class="text-gray-500">Repos</p>
            </div>
            <div>
              <p class="font-semibold">${u.public_gists}</p>
              <p class="text-gray-500">Gists</p>
            </div>
          </div>

          <div class="mt-6 w-full grid grid-cols-1 gap-3 text-sm">
            <p class="bg-gray-100 p-2 rounded-md">
              <span class="font-semibold">Location:</span> ${u.location ?? "Unknown"}
            </p>

            <a href="${u.blog}" target="_blank"
              class="bg-gray-100 p-2 rounded-md text-blue-600 underline break-all">
              <span class="font-semibold">Blog:</span> ${u.blog || "â€”"}
            </a>

            <a href="${u.html_url}" target="_blank"
              class="bg-gray-100 p-2 rounded-md text-blue-600 underline">
              View GitHub Profile
            </a>
          </div>
        </div>
      `;

      profileCard.classList.remove("hidden");
    }
  </script>
</body>

</html>