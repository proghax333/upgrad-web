<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>

  <main>
    <div class="max-w-lg mx-auto p-4 my-12">
      <form class="flex flex-col" id="feedbackForm">
        <h2 class="text-xl font-semibold">User Feedback</h2>

        <div class="mt-4 flex flex-col gap-2">
          <label for="name" class="font-semibold text-gray-700">Name</label>
          <input id="name" name="name" type="text" class="w-full border rounded-md p-2 px-4" placeholder="John Doe" />
        </div>

        <div class="mt-4 flex flex-col gap-2">
          <label for="email" class="font-semibold text-gray-700">Email</label>
          <input id="email" name="email" type="text" class="w-full border rounded-md p-2 px-4"
            placeholder="mail@mail.mail" />
        </div>

        <div class="mt-4 flex flex-col gap-2">
          <label for="message" class="font-semibold text-gray-700">Message</label>
          <textarea id="message" name="message" class="w-full border rounded-md p-2 px-4"
            placeholder="Write your message here..." rows="6"></textarea>
        </div>

        <div class="mt-4 flex flex-col gap-2">
          <button class="w-full bg-indigo-700 text-white font-semibold p-2 px-4 rounded-md">Submit</button>
        </div>
      </form>
    </div>
  </main>

  <script>
    function select(q) {
      return document.querySelector(q);
    }

    const feedbackFormElement = select("#feedbackForm");

    feedbackFormElement.addEventListener("submit", handleSubmit);

    const HTTP_STATUS = {
      OK: 200,
      NOT_FOUND: 404,
      INTERNAL_SERVER_ERROR: 500,
    };

    function handleSubmit(e) {
      e.preventDefault();

      const formData = new FormData(feedbackFormElement);
      const data = Object.fromEntries(formData.entries());

      const xhr = new XMLHttpRequest();

      xhr.open("POST", "https://example.com/api/submit", true);

      xhr.onreadystatechange = () => {
        if (xhr.readyState === XMLHttpRequest.DONE) {

          if (xhr.status === HTTP_STATUS.OK) {
            alert("Feedback sent successfully!");
          } else {
            alert("Could not send the feedback!");
          }

        }
      };

      const requestBody = `
      <data>
        <item>
          <name>${data.name}</name>
          <email>${data.email}</email>
          <message>${data.message}</message>
        </item>
      </data>
      `;

      xhr.send(requestBody);
    }

  </script>
</body>

</html>